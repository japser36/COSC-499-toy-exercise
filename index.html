<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<style type="text/css">
			* {
				font-family: Arial, Helvetica, sans-serif;
				--color-dark: #2b2d42;
				--color-mid: #8d99ae;
				--color-light: #edf2f4;
				--color-a-light: #ef233c;
				--color-a-dark: #d90429;
				color: var(--color-light);
				background-color: var(--color-dark);
			}
			h1, h3 {
				font-family: Impact, Charcoal, sans-serif;
			}
			hr {
				color: var(--color-mid);
			}
			body {
				margin: 0;
				padding: 0;
				width: 100vw;
				height: 100vh;
				display: flex;
				flex-direction: row;
				align-items: stretch;
				justify-content: center;
			}
			.container {
				width: 100%;
				max-width: 1080px;
				padding: 1em;
				background-color: var(--color-mid);
			}
		</style>
	</head>
	<body>
		<div class="container">
			<h1>Guess the Number!</h1>
			<p>Can you think of the number the computer is guessing?</p>
			<hr>
			<h3>How to Play</h3>
			<ol>
				<li>
					<p>Press on the 'Play' button to begin the game.</p>
				</li>
				<li>
					<p>The computer will tell you it is thinking of a number.</p>
				</li>
				<li>
					<p>Enter a number into the box, and click 'Submit' to check your guess.</p>
					<ul>
						<li>
							<p>If you guessed correct, the computer will tell you.</p>
						</li>
						<li>
							<p>If not, the computer will tell you to guess <b>higher</b> or <b>lower</b>.</p>
						</li>
					</ul>
				</li>
				<li>
					<p>Guess numbers until you win! Or press 'New Game' to start a new game if you don't want to play this one.</p>
				</li>
				<li>
					<p>Play again by pressing 'New Game', because this is obviously the best game you've ever played! :)</p>
				</li>
			</ol>
			<hr>
			<div id="main" style="display: none;">
				<p>I'm thinking of an integer between <span id="lower">1</span> and <span id="upper">100</span> (inclusive).</p>
				<p id="prompt" style="display: none;"></p>
				<input id="inp" type="number">
				<button id="submit">Submit</button>
			</div>
			<button id="play" step="1">Play</button>
		</div>
		<script
			  src="https://code.jquery.com/jquery-3.5.1.min.js"
			  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
			  crossorigin="anonymous"></script>
		<script type="text/javascript">
			$(document).ready(() => {
				console.log('Ready!');
				var number;
				var upperBound = 100;
				var lowerBound = 0;
				const startGame = () => {
					console.log("Starting new game...");
					$("#prompt").hide();
					$("#submit").off("click");

					// TODO generate upper and lower bound randomly, based on some conditions.

					$("#inp").val(null);
					number = Math.round(Math.random() * (upperBound - lowerBound) + lowerBound);

					$("#submit").on("click", guess);
					$("#main").show();
					$("#play").html("New Game");
					console.log("New game started.");
				};
				const win = () => {
					console.log('User won!');
					$("#submit").off("click");
					$("#prompt")
						.html(`Correct! You win! The number was indeed ${number}.`);
						.show();
				};
				const higher = (num) => {
					console.debug('Higher!');
					$("#prompt").html(`Nope, not ${num}. Higher!`).show();
				};
				const lower = (num) => {
					console.debug('Lower!');
					$("#prompt").html(`Nope, not ${num}. Lower!`).show();
				};
				const guess = () => {
					console.log("Checking user guess...");
					const userGuess = $("#inp").val();
					// TODO validate input here.
					console.log("User inputted", userGuess);
					if (userGuess < number) {
						higher(userGuess);
					} else if (userGuess > number) {
						lower(userGuess);
					} else {
						if (userGuess == number) {
							win();
						} else {
							console.error("Impossible case hit:", userGuess, number);
						}
					}
				};
				$("#play").on("click", startGame);
			});
		</script>
	</body>
</html>
